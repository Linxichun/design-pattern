# 简介
## 为什么要使用代理模式
在某些情况下，一个客户端不想或者不能直接引用一个对象，此时可以通过“代理”实现间接引用。
## 什么是代理模式
代理模式(Proxy Pattern) ：为其他对象提供一种代理以控制对这个对象的访问。
## 别名
Surrogate
## 类型
对象结构型模式
## 遵守的原则
迪米特法则。外观模式对客户端屏蔽子系统，客户端不需要了解子系统，直接访问外观类即可。
# 本文角色
- Subject：抽象主题角色 
    - 抽象类
    - 真实主题和代理主题的抽象父类。所以在任何使用真实主题的地方都可以使用代理主题，客户端通常需要针对抽象主题角色进行编程。
- Proxy: 代理主题角色 
    - 具体类
    - 继承抽象主题角色。
    - 包含了对真实主题的引用，在任何时候都可以操作真实主题对象。
    - 在代理主题角色中提供一个与真实主题角色相同的接口，以便在任何时候都可以替代真实主题。
    - 代理主题角色还可以控制对真实主题的使用，负责在需要的时候创建和删除真实主题对象，并对真实主题对象的使用加以约束。
- RealSubject: 真实主题角色 
    - 具体类
    - 继承抽象主题角色。
    - 实现了真实的业务操作。
# 实现
- 创建抽象主题角色Subject.java
- 创建代理主题角色Proxy.java
- 创建真实主题角色RealSubject.java
- 创建客户端Client.java
# 分类
根据代理模式的使用目的，常见的代理模式有以下几种类型：
- 远程(Remote)代理
- 虚拟(Virtual)代理
- Copy-on-Write代理
- 保护(Protect or Access)代理
- 防火墙(Firewall)代理
- 同步化(Synchronization)代理
- 智能引用(Smart Reference)代理
## 远程(Remote)代理
为一个位于不同的地址空间的对象提供一个本地的代理对象，这个不同的地址空间可以是在同一台主机中，也可是在另一
台主机中，远程代理又叫做大使(Ambassador)。它使得客户端程序可以访问在远程主机上的对象。
使用场景：
- webservice、EJB、dubbo等分布式技术。
## 虚拟(Virtual)代理
如果需要创建一个资源消耗较大的对象，先创建一个消耗相对较小的对象来表示，真实对象只在需要时才会被真正创建。
对于一些占用系统资源较多或者加载时间较长的对象，可以给这些对象提供一个虚拟代理。
使用场景：
- 由于对象本身的复杂性或者网络等原因导致一个对象需要较长的加载时间
- 当一个对象的加载十分耗费系统资源的时候
## Copy-on-Write代理
它是虚拟代理的一种，把克隆操作延迟到只有在客户端真正需要时才执行。一般来说，对象的深克隆是一个开销较大的操作，
Copy-on-Write代理可以让这个操作延迟，只有对象被用到的时候才被克隆。
## 保护(Protect or Access)代理
控制对一个对象的访问，可以给不同的用户提供不同级别的使用权限。
## 缓冲(Cache)代理
为某一个目标操作的结果提供临时的存储空间，以便多个客户端可以共享这些结果。从而可以避免某些方法的重复执行，
优化系统性能。
## 防火墙(Firewall)代理
保护目标不让恶意用户接近。
## 同步化(Synchronization)代理
使几个用户能够同时使用一个对象而没有冲突。
## 智能引用(Smart Reference)代理
当一个对象被引用时，提供一些额外的操作，如将此对象被调用的次数记录下来等。
# 优缺点
## 优点
- 降低耦合度。降低了调用者和被调用者的耦合度。
## 缺点
待补充。
## 适用环境
见[分类](http://blog.csdn.net/panweiwei1994/article/details/75209012#t3)。
##使用场景
见[分类](http://blog.csdn.net/panweiwei1994/article/details/75209012#t3)。
# 扩展
## Adapter模式与Proxy模式的关系
适配器Adapter为它所适配的对象提供了一个不同的接口。相反，代理提供了与它的实体相同的接口。
## Decorator模式与Proxy模式的关系
尽管代理的实现与Decorator的实现类似，但decorator的目的不一样。Decorator目的是为对象添加一个或多个功能，而代理
则控制对对象的访问。
# 问题
## 动态代理和代理模式的关系
待补充。
##在软件开发中，你在哪里用到了代理模式？
待补充。

结构型模式讲到这里就结束了，下一篇文章对最近所学的结构型模式做阶段性总结。 
传送门：[设计模式-结构型模式总结](http://blog.csdn.net/panweiwei1994/article/details/76076292)